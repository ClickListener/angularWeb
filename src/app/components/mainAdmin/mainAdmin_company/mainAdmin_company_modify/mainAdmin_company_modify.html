<h1>mainAdmin company modify</h1>


<div *ngIf="companyInfo">
  <p style="display: inline-block">Company state: </p>

  <select name="state" [(ngModel)]="companyInfo.state">
    <option value="0">Not Audit</option>
    <option value="2">Disabled</option>
    <option value="3">Active</option>
  </select>
</div>

<a class="btn btn-primary btn-sm" (click)="updateCompanyInfo()">Update company state</a>

<form *ngIf="companyInfo" style="margin-left: 3rem;margin-right: 3rem; margin-bottom: 3rem">
  <fieldset>
    <legend>Base Info</legend>
    <table class="table table-borderLess ">
      <tbody>
      <tr>
        <th>Corporate Name</th>
        <td>{{companyInfo.companyName}}</td>
      </tr>
      <tr>
        <th>Country</th>
        <td>{{companyInfo.country}}</td>
      </tr>
      <tr>
        <th>Origin</th>
        <td>{{companyInfo.orgin}}</td>
      </tr>
      <tr>
        <th>Address</th>
        <td>{{companyInfo.address}}</td>
      </tr>
      <tr>
        <th>Master Developer</th>
        <td *ngIf="companyInfo.mDeveloper">
          <p>{{companyInfo.mDeveloper.username}}</p>
          <p>{{companyInfo.mDeveloper.email}}</p>
        </td>
      </tr>
      </tbody>
    </table>
  </fieldset>

  <fieldset>
    <legend>Description</legend>
    <pre>{{companyInfo.description}}</pre>
  </fieldset>

  <fieldset>
    <legend>Business License</legend>
    <a data-target="#imageModal" data-toggle="modal"><img id="preview" src="{{url}}{{companyInfo.avatar.description}}/{{companyInfo.avatar.fileName}}"
            style="width: 80px; height: 80px"></a>

    <div class="modal fade" id="imageModal" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalLabel" aria-hidden="true">

      <div class="modal-dialog" role="document" style="width: 50%; max-width: 100%">
        <div class="modal-content">
          <div class="modal-body" style="padding: 0">
            <img src="{{url}}{{companyInfo.avatar.description}}/{{companyInfo.avatar.fileName}}"
                 style="width: 100%;">
          </div>
        </div>
      </div>

    </div>
  </fieldset>
</form>


<div style="margin-left: 3rem;margin-right: 3rem; margin-bottom: 3rem">


  <div class="card" *ngIf="appList && appList.length !== 0">

    <div class="card-body">

      <div *ngFor="let app of appList; let i = index">
        <p>{{app.appName}}</p>
        <div class="form-custom">
          <div class="form-custom-head">
            <p class="item-1">App icon</p>
            <p class="item-1">State</p>
            <p class="item-1">Platform</p>
            <p class="item-2">License Expired</p>
            <p class="item-1">Device No.</p>
            <p class="item-1">Use No.</p>
            <p class="item-2">Operation</p>
          </div>

          <div class="form-custom-content">
            <div>
              <a class="item-1"><img style="width: 80px;height: 80px;"
                                     src="{{url}}{{app.avatar.description}}/{{app.avatar.fileName}}"></a>
              <p class="item-1">
                <select name="state" [(ngModel)]="app.state">
                  <option value="0">Not Audit</option>
                  <option value="2">Disabled</option>
                  <option value="3">Active</option>
                </select>
              </p>
              <p class="item-1">{{app.platform}}</p>
              <p class="item-2">{{app.expireTime | date: 'yyyy-MM-dd'}}</p>
              <div class="item-1">{{app.devices.length}}

                <a class="collapsed" style="position: relative" [style.z-index]="100 - i"
                   data-toggle="collapse" [attr.data-target]="'#detail' + i"
                   aria-expanded="false" aria-controls="devices-detail" *ngIf="app.devices.length !== 0">
                  <img src="../../../../assets/images/down.png">

                  <div class="triangle-big"></div>
                  <div class="triangle-small">

                    <div class="collapse device-detail" [attr.id]="'detail' + i">

                      <div class="device-detail-form">
                        <div class="device-detail-form-head">
                          <p class="item-2 custom-center-p" style="margin-right: 10%">Device Model</p>
                          <p class="item-1 custom-center-p">Device No.</p>
                          <p class="item-1 custom-center-p">Use No.</p>
                        </div>
                        <div class="device-detail-form-head" style="border-top: 1px solid #e9ecef;"
                             *ngFor="let device of app.devices">
                          <div class="item-2 custom-center-p" style="margin-right: 15%;">
                            <img src="../../../../assets/images/device_{{device.model | lowercase}}.png"
                                 style="width: 3rem; height: 3rem">
                            <p style="display: inline-block">{{device.model}}</p>
                          </div>
                          <p class="item-1 custom-center-p">{{device.totalNumber}}</p>
                          <p class="item-1 custom-center-p">{{device.deviceUsedNumber}}</p>
                        </div>
                      </div>
                    </div>
                  </div>


                </a>


              </div>
              <p class="item-1">{{app.installedPhoneNumber? app.installedPhoneNumber: 0}}</p>

              <div class="item-2">
                <a class="btn btn-primary" (click)="updateAppState(app)">Update app state</a>
              </div>
            </div>

          </div>
        </div>
      </div>

    </div>
  </div>


</div>
