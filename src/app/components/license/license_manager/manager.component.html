

<h1>Manager license</h1>

<button (click)="createNewLicense()">创建新的License</button>
<button (click)="downloadLicense('5a0c0330216af70e1f41b0d3')" >下载</button>
<a href="/api/license/5a0c0330216af70e1f41b0d3">下载</a>


<div class="card card-cascade narrower mt-5">

    <!--Card image-->
    <div class="view gradient-card-header purple-gradient narrower py-4 mx-4 mb-3 d-flex justify-content-center align-items-center">

        <h4 class="white-text font-bold font-up mb-0">Table name</h4>

    </div>
    <!--/Card image-->

    <!--Accordion wrapper-->
    <div class="accordion" id="accordionEx" role="tablist" aria-multiselectable="true">


    <div *ngIf="licenses !== undefined && licenses.length !== 0">

        <div class="container">
            <div class="row">
                <div class="col-4 text-center">
                    ExpiredDate
                </div>
                <div class="col-2 text-center">
                    Devices
                </div>
                <div class="col-2 text-center">
                    InstallPhoneNumber
                </div>
                <div class="col-4 text-center">
                    Operation
                </div>
            </div>


            <hr>


            <!-- Accordion card -->
            <div class="card" *ngFor="let license of licenses; let i = index">

                <!-- Card header -->
                <div class="card-header" role="tab" id="headingOne">
                    <a class="collapsed" data-toggle="collapse" data-parent="#accordionEx" [attr.data-target]="'#'+ i"
                       arrt.aria-expanded="false">
                        <div class="row">
                            <div class="col-4 text-center">
                                {{license.expired_ts | date:"MM/dd/yyyy"}}
                            </div>
                            <div class="col-2 text-center">
                                {{license.devices.length}}
                            </div>
                            <div class="col-2 text-center">
                                {{license.InstalledPhoneNumber}}
                            </div>
                            <div class="col-4 text-center">
                              <button class="btn btn-primary" (click)="downloadLicense(license._id)">下载</button>
                                <button class="btn btn-primary" (click)="modifyLicense(license._id)">更新</button>
                                <button class="btn badge-danger" (click)="deleteLicense(license._id)">删除</button>
                            </div>
                            <i class="fa fa-angle-down rotate-icon" ></i>
                        </div>

                    </a>
                </div>

                <!-- Card body -->
                <div [attr.id]="i" class="collapse" role="tabpanel">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-4 text-center">
                                <b>DeviceModel</b>
                            </div>
                            <div class="col-4 text-center">
                                <b>TotalNumber</b>
                            </div>
                            <div class="col-4 text-center">
                                <b>UsedNumber</b>
                            </div>
                        </div>

                        <div class="row" *ngFor="let device of license.devices">
                            <div class="col-4 text-center">
                                <b>{{device.deviceName}}</b>
                            </div>
                            <div class="col-4 text-center">
                                <b>{{device.totalNumber}}</b>
                            </div>
                            <div class="col-4 text-center">
                                <b>{{device.deviceUsedNumber}}</b>
                            </div>
                        </div>
                    </div>
                </div>


            </div>

        </div>

        <!-- Accordion card -->
    </div>

    </div>
    <!--/.Accordion wrapper-->

    <hr class="my-0">

    <!--Bottom Table UI-->
    <div class="d-flex justify-content-center">

        <!--Pagination -->
        <nav class="my-4 pt-2">
            <ul class="pagination pagination-circle pg-purple mb-0">

                <!--First-->
                <li class="page-item disabled clearfix d-none d-md-block"><a class="page-link">First</a></li>

                <!--Arrow left-->
                <li class="page-item disabled">
                    <a class="page-link" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>

                <!--Numbers-->
                <li class="page-item active"><a class="page-link">1</a></li>
                <li class="page-item"><a class="page-link">2</a></li>
                <li class="page-item"><a class="page-link">3</a></li>
                <li class="page-item"><a class="page-link">4</a></li>
                <li class="page-item"><a class="page-link">5</a></li>

                <!--Arrow right-->
                <li class="page-item">
                    <a class="page-link" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>

                <!--First-->
                <li class="page-item clearfix d-none d-md-block"><a class="page-link">Last</a></li>

            </ul>
        </nav>
        <!--/Pagination -->

    </div>
    <!--Bottom Table UI-->

</div>






